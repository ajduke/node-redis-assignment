var assert = require('assert');
var dom = require('dom');

var typeahead = require('..');

test('init', function() {
    var input = document.createElement('input');
    var ta = typeahead(input, {
        source: [ 'apple', 'pear', 'grape' ]
    });

    // typeahead will create empty menu at end of page
    var ul = document.body.childNodes[document.body.childNodes.length - 1];
    assert.equal(ul, ta.menu[0]);
    assert.equal(ul.childNodes.length, 0);
});

test('query', function() {
    var input = document.createElement('input');
    document.body.appendChild(input);

    var ta = typeahead(input, {
        source: [ 'apple', 'pear', 'grape' ]
    });

    dom(input).emit('keypress', {
        keyCode: 97,
        charCode: 'a'
    });

    // change the value of the input element
    assert.equal(input.value, 'ap');
});
